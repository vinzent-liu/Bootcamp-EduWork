<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Commerce Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <!-- Custom CSS untuk styling card dan komponen -->
  <style>
    /* Font dan background dasar */
    body { font-family: 'Poppins', Arial, sans-serif; background: #f8f9fa; }
    /* Efek hover pada card produk */
    .product-card { transition: box-shadow .2s; }
    .product-card:hover { box-shadow: 0 4px 24px #a855f733; }
    /* Gambar produk agar proporsional */
    .product-img { height: 180px; object-fit: cover; border-radius: 1rem 1rem 0 0; }
    /* Tombol kategori aktif */
    .category-btn.active { background: #a855f7; color: #fff; }
    /* Search bar responsif */
    .search-bar { max-width: 350px; }
  </style>
</head>
<body>
  <!-- Navbar sederhana -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">TokTokPedia</a>
    </div>
  </nav>
  <div class="container mb-5">
    <!-- Filter kategori dan search bar -->
    <div class="row mb-4 align-items-center">
      <div class="col-md-8 mb-2 mb-md-0">
        <!-- Tombol filter kategori akan di-generate JS -->
        <div id="categoryFilter" class="btn-group" role="group"></div>
      </div>
      <div class="col-md-4 text-md-end">
        <!-- Search bar untuk pencarian nama produk -->
        <input type="text" id="searchInput" class="form-control search-bar" placeholder="Cari produk...">
      </div>
    </div>
    <!-- Daftar produk akan diisi oleh JS -->
    <div class="row" id="productList"></div>
    <!-- Modal Checkout Produk -->
    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-bold" id="checkoutModalLabel">Checkout Produk</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <img id="modalImg" src="" class="product-img w-100 mb-3" alt="">
            <h4 class="card-title" id="modalName"></h4>
            <div class="mb-2 text-primary fw-bold" id="modalKategori"></div>
            <p class="card-text mb-2" id="modalDeskripsi"></p>
            <div class="fw-bold mb-3" id="modalHarga" style="color:#a855f7;"></div>
            <button class="btn btn-success w-100" onclick="alert('Pembelian berhasil! (simulasi)')">Konfirmasi Beli</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Data produk: array of object (name, deskripsi, harga, gambar, kategori)
    const products = [
      // Elektronik
  {name: 'Smartphone X', deskripsi: 'Layar AMOLED, baterai tahan lama.', harga: 3500000, gambar: 'https://images.pexels.com/photos/607812/pexels-photo-607812.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Elektronik'},
  {name: 'Laptop Pro', deskripsi: 'Ringan, performa tinggi untuk kerja dan hiburan.', harga: 8500000, gambar: 'https://images.pexels.com/photos/18105/pexels-photo.jpg?auto=compress&w=400&h=300&fit=crop', kategori: 'Elektronik'},
  // Fashion
  {name: 'Jaket Hoodie', deskripsi: 'Nyaman dan stylish untuk sehari-hari.', harga: 250000, gambar: 'https://images.pexels.com/photos/532220/pexels-photo-532220.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Fashion'},
  {name: 'Sneakers Sporty', deskripsi: 'Sepatu olahraga ringan dan trendy.', harga: 400000, gambar: 'https://images.pexels.com/photos/2529148/pexels-photo-2529148.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Fashion'},
  // Buku
  {name: 'Buku Motivasi', deskripsi: 'Inspirasi untuk meraih mimpi.', harga: 80000, gambar: 'https://images.pexels.com/photos/256541/pexels-photo-256541.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Buku'},
  {name: 'Novel Fiksi', deskripsi: 'Cerita seru penuh imajinasi.', harga: 95000, gambar: 'https://images.pexels.com/photos/46274/pexels-photo-46274.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Buku'},
  // Makanan
  {name: 'Kopi Arabika', deskripsi: 'Biji kopi pilihan, rasa khas.', harga: 120000, gambar: 'https://images.pexels.com/photos/585750/pexels-photo-585750.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Makanan'},
  {name: 'Coklat Premium', deskripsi: 'Coklat Belgia, lumer di mulut.', harga: 70000, gambar: 'https://images.pexels.com/photos/461382/pexels-photo-461382.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Makanan'},
  // Kecantikan
  {name: 'Serum Wajah', deskripsi: 'Mencerahkan dan melembapkan kulit.', harga: 150000, gambar: 'https://images.pexels.com/photos/3738341/pexels-photo-3738341.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Kecantikan'},
  {name: 'Lipstik Matte', deskripsi: 'Tahan lama, warna natural.', harga: 90000, gambar: 'https://images.pexels.com/photos/3373746/pexels-photo-3373746.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Kecantikan'}
    ];
    // Ambil semua kategori unik, tambah 'Semua' di depan
    const categories = ['Semua', ...Array.from(new Set(products.map(p => p.kategori)))];
    let selectedCategory = 'Semua'; // Kategori yang sedang dipilih
    let searchQuery = ''; // Query pencarian

    // Render tombol filter kategori
    function renderCategories() {
      const catFilter = document.getElementById('categoryFilter');
      catFilter.innerHTML = categories.map(cat =>
        `<button class="btn btn-outline-primary category-btn${cat===selectedCategory?' active':''}" onclick="filterCategory('${cat}')">${cat}</button>`
      ).join('');
    }
    // Render produk sesuai filter kategori dan pencarian
    function renderProducts() {
      const list = document.getElementById('productList');
      // Filter produk berdasarkan kategori & nama
      let filtered = products.filter(p =>
        (selectedCategory==='Semua'||p.kategori===selectedCategory) &&
        p.name.toLowerCase().includes(searchQuery.toLowerCase())
      );
      // Jika tidak ada produk yang cocok
      if(filtered.length===0) {
        list.innerHTML = '<div class="col-12 text-center text-muted py-5">Produk tidak ditemukan.</div>';
        return;
      }
      // Tampilkan produk dalam card
      list.innerHTML = filtered.map((p, idx) => `
        <div class=\"col-md-4 col-lg-3 mb-4\">
          <div class=\"card product-card h-100 shadow-sm\">
            <img src=\"${p.gambar}\" class=\"product-img w-100\" alt=\"${p.name}\">
            <div class=\"card-body\">
              <h5 class=\"card-title\">${p.name}</h5>
              <div class=\"mb-2 text-primary fw-bold\">${p.kategori}</div>
              <p class=\"card-text mb-2\">${p.deskripsi}</p>
              <div class=\"fw-bold mb-2\" style=\"color:#a855f7;\">Rp${p.harga.toLocaleString('id-ID')}</div>
              <button class=\"btn btn-sm btn-outline-success w-100\" onclick=\"goToCheckout(${products.indexOf(p)})\">Beli</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Fungsi untuk redirect ke halaman checkout dengan data produk (harus di global scope)
    // Tampilkan modal checkout dan isi detail produk
    function goToCheckout(idx) {
      const p = products[idx];
      document.getElementById('modalName').textContent = p.name;
      document.getElementById('modalDeskripsi').textContent = p.deskripsi;
      document.getElementById('modalKategori').textContent = p.kategori;
      document.getElementById('modalHarga').textContent = 'Rp' + p.harga.toLocaleString('id-ID');
      document.getElementById('modalImg').src = p.gambar;
      document.getElementById('modalImg').alt = p.name;
      // Tampilkan modal Bootstrap 5
      var myModal = new bootstrap.Modal(document.getElementById('checkoutModal'));
      myModal.show();
    }
    
    // Fungsi filter kategori (dipanggil saat tombol kategori diklik)
    function filterCategory(cat) {
      selectedCategory = cat;
      renderCategories();
      renderProducts();
    }
    // Event listener untuk search bar
    document.getElementById('searchInput').addEventListener('input', function(e) {
      searchQuery = e.target.value;
      renderProducts();
    });
    // Inisialisasi tampilan kategori & produk saat halaman dimuat
    renderCategories();
    renderProducts();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
