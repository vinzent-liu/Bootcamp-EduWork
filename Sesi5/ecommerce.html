<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Commerce Demo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <!-- Custom CSS untuk styling card dan komponen -->
  <style>
    /* Font dan background dasar */
    body { font-family: 'Poppins', Arial, sans-serif; background: #f8f9fa; }
      /* Custom CSS untuk styling card dan komponen */
    /* Efek hover pada card produk */
      .product-card {
        transition: box-shadow .2s, transform .2s;
        border: none;
        border-radius: 1.2rem;
        overflow: hidden;
        background: #fff;
        box-shadow: 0 2px 12px #a855f71a;
      }
      .product-card:hover {
        box-shadow: 0 8px 32px #a855f74d;
        transform: translateY(-6px) scale(1.03);
      }
      .product-img {
        height: 180px;
        object-fit: cover;
        border-radius: 1.2rem 1.2rem 0 0;
        border-bottom: 1px solid #f3e8ff;
      }
      .category-btn.active {
        background: linear-gradient(90deg, #a855f7 0%, #ec4899 100%);
        color: #fff;
        border: none;
        box-shadow: 0 2px 8px #a855f733;
      }
      .category-btn {
        border-radius: 2rem !important;
        font-weight: 500;
      }
      .search-bar { max-width: 350px; border-radius: 2rem; }
      .btn-outline-success {
        border-radius: 2rem;
        font-weight: 500;
        border-width: 2px;
        color: #a855f7;
        border-color: #a855f7;
        background: #fff;
        transition: background .2s, color .2s;
      }
      .btn-outline-success:hover {
        background: linear-gradient(90deg, #a855f7 0%, #ec4899 100%);
        color: #fff;
        border-color: #a855f7;
      }
      .fw-bold.price {
        color: #a855f7;
        font-size: 1.15em;
        letter-spacing: 0.5px;
      }
      .modal-content {
        border-radius: 1.2rem;
        box-shadow: 0 8px 32px #a855f74d;
      }
      .modal-body {
        padding-bottom: 2rem;
      }
      .btn-success {
        border-radius: 2rem;
        background: linear-gradient(90deg, #a855f7 0%, #ec4899 100%);
        border: none;
        font-weight: 600;
        letter-spacing: 0.5px;
      }
      .btn-success:hover {
        background: linear-gradient(90deg, #ec4899 0%, #a855f7 100%);
      }
      .navbar {
        border-radius: 0 0 1.2rem 1.2rem;
        box-shadow: 0 2px 12px #a855f71a;
      }
      .card-title {
        font-size: 1.18em;
        font-weight: 600;
        color: #222;
      }
      .text-primary.fw-bold {
        color: #a855f7 !important;
      }
  </style>
</head>
<body>
  <!-- Navbar sederhana -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">TokTokPedia</a>
    </div>
  </nav>
  <div class="container mb-5">
    <!-- Filter kategori dan search bar -->
    <div class="row mb-4 align-items-center">
      <div class="col-md-8 mb-2 mb-md-0">
        <!-- Tombol filter kategori akan di-generate JS -->
        <div id="categoryFilter" class="btn-group" role="group"></div>
      </div>
      <div class="col-md-4 text-md-end">
        <!-- Search bar untuk pencarian nama produk -->
        <input type="text" id="searchInput" class="form-control search-bar" placeholder="Cari produk...">
      </div>
    </div>
    <!-- Daftar produk akan diisi oleh JS -->
    <div class="row" id="productList"></div>
    <!-- Modal Checkout Produk -->
    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-bold" id="checkoutModalLabel">Checkout Produk</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <img id="modalImg" src="" class="product-img w-100 mb-3" alt="">
            <h4 class="card-title" id="modalName"></h4>
            <div class="mb-2 text-primary fw-bold" id="modalKategori"></div>
            <p class="card-text mb-2" id="modalDeskripsi"></p>
              <div class="fw-bold price mb-3" id="modalHarga"></div>
              <button class="btn btn-success w-100 py-2" onclick="alert('Pembelian berhasil! (simulasi)')"><i class="bi bi-bag-check me-1"></i>Konfirmasi Beli</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Data produk: array of object (name, deskripsi, harga, gambar, kategori)
    const products = [
      // Elektronik
  {name: 'Smartphone X', deskripsi: 'Layar AMOLED, baterai tahan lama.', harga: 3500000, gambar: 'https://images.pexels.com/photos/607812/pexels-photo-607812.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Elektronik'},
  {name: 'Laptop Pro', deskripsi: 'Ringan, performa tinggi untuk kerja dan hiburan.', harga: 8500000, gambar: 'https://images.pexels.com/photos/18105/pexels-photo.jpg?auto=compress&w=400&h=300&fit=crop', kategori: 'Elektronik'},
  // Fashion
  {name: 'Jaket Hoodie', deskripsi: 'Nyaman dan stylish untuk sehari-hari.', harga: 250000, gambar: 'https://images.pexels.com/photos/532220/pexels-photo-532220.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Fashion'},
  {name: 'Sneakers Sporty', deskripsi: 'Sepatu olahraga ringan dan trendy.', harga: 400000, gambar: 'https://images.pexels.com/photos/2529148/pexels-photo-2529148.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Fashion'},
  // Buku
  {name: 'Buku Motivasi', deskripsi: 'Inspirasi untuk meraih mimpi.', harga: 80000, gambar: 'https://images.pexels.com/photos/256541/pexels-photo-256541.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Buku'},
  {name: 'Novel Fiksi', deskripsi: 'Cerita seru penuh imajinasi.', harga: 95000, gambar: 'https://images.pexels.com/photos/46274/pexels-photo-46274.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Buku'},
  // Makanan
  {name: 'Kopi Arabika', deskripsi: 'Biji kopi pilihan, rasa khas.', harga: 120000, gambar: 'https://images.pexels.com/photos/585750/pexels-photo-585750.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Makanan'},
  {name: 'Coklat Premium', deskripsi: 'Coklat Belgia, lumer di mulut.', harga: 70000, gambar: 'https://images.pexels.com/photos/461382/pexels-photo-461382.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Makanan'},
  // Kecantikan
  {name: 'Serum Wajah', deskripsi: 'Mencerahkan dan melembapkan kulit.', harga: 150000, gambar: 'https://images.pexels.com/photos/3738341/pexels-photo-3738341.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Kecantikan'},
  {name: 'Lipstik Matte', deskripsi: 'Tahan lama, warna natural.', harga: 90000, gambar: 'https://images.pexels.com/photos/3373746/pexels-photo-3373746.jpeg?auto=compress&w=400&h=300&fit=crop', kategori: 'Kecantikan'}
    ];
    // Ambil semua kategori unik, tambah 'Semua' di depan
    const categories = ['Semua', ...Array.from(new Set(products.map(p => p.kategori)))];
    let selectedCategory = 'Semua'; // Kategori yang sedang dipilih
    let searchQuery = ''; // Query pencarian

    // Render tombol filter kategori
    function renderCategories() {
      const catFilter = document.getElementById('categoryFilter');
      catFilter.innerHTML = categories.map(cat =>
        `<button class="btn btn-outline-primary category-btn${cat===selectedCategory?' active':''}" onclick="filterCategory('${cat}')">${cat}</button>`
      ).join('');
    }
    // Render produk sesuai filter kategori dan pencarian
    function renderProducts() {
      const list = document.getElementById('productList');
      // Filter produk berdasarkan kategori & nama
      let filtered = products.filter(p =>
        (selectedCategory==='Semua'||p.kategori===selectedCategory) &&
        p.name.toLowerCase().includes(searchQuery.toLowerCase())
      );
      // Jika tidak ada produk yang cocok
      if(filtered.length===0) {
        list.innerHTML = '<div class="col-12 text-center text-muted py-5">Produk tidak ditemukan.</div>';
        return;
      }
      // Tampilkan produk dalam card
      list.innerHTML = filtered.map((p, idx) => `
        <div class=\"col-md-4 col-lg-3 mb-4\">
          <div class=\"card product-card h-100 shadow-sm\">
            <img src=\"${p.gambar}\" class=\"product-img w-100\" alt=\"${p.name}\">
            <div class=\"card-body\">
              <h5 class=\"card-title\">${p.name}</h5>
              <div class=\"mb-2 text-primary fw-bold\">${p.kategori}</div>
              <p class=\"card-text mb-2\">${p.deskripsi}</p>
                <div class=\"fw-bold price mb-2\">Rp${p.harga.toLocaleString('id-ID')}</div>
                <button class=\"btn btn-sm btn-outline-success w-100 py-2\" onclick=\"goToCheckout(${products.indexOf(p)})\"><i class="bi bi-cart-plus me-1"></i>Beli</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Fungsi untuk redirect ke halaman checkout dengan data produk (harus di global scope)
    // Tampilkan modal checkout dan isi detail produk
    function goToCheckout(idx) {
      const p = products[idx];
      document.getElementById('modalName').textContent = p.name;
      document.getElementById('modalDeskripsi').textContent = p.deskripsi;
      document.getElementById('modalKategori').textContent = p.kategori;
      document.getElementById('modalHarga').textContent = 'Rp' + p.harga.toLocaleString('id-ID');
      document.getElementById('modalImg').src = p.gambar;
      document.getElementById('modalImg').alt = p.name;
      // Tampilkan modal Bootstrap 5
      var myModal = new bootstrap.Modal(document.getElementById('checkoutModal'));
      myModal.show();
    }
    
    // Fungsi filter kategori (dipanggil saat tombol kategori diklik)
    function filterCategory(cat) {
      selectedCategory = cat;
      renderCategories();
      renderProducts();
    }
    // Event listener untuk search bar
    document.getElementById('searchInput').addEventListener('input', function(e) {
      searchQuery = e.target.value;
      renderProducts();
    });
    // Inisialisasi tampilan kategori & produk saat halaman dimuat
    renderCategories();
    renderProducts();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
